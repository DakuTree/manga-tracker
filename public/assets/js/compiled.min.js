var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,d,a){b instanceof String&&(b=String(b));for(var c=b.length,g=0;g<c;g++){var f=b[g];if(d.call(a,f,g,b))return{i:g,v:f}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,d,a){b!=Array.prototype&&b!=Object.prototype&&(b[d]=a.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,d,a,c){if(d){a=$jscomp.global;b=b.split(".");for(c=0;c<b.length-1;c++){var g=b[c];g in a||(a[g]={});a=a[g]}b=b[b.length-1];c=a[b];d=d(c);d!=c&&null!=d&&$jscomp.defineProperty(a,b,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var d=0;return $jscomp.iteratorPrototype(function(){return d<b.length?{done:!1,value:b[d++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.polyfill("Array.from",function(b){return b?b:function(b,a,c){$jscomp.initSymbolIterator();a=null!=a?a:function(e){return e};var d=[],f=b[Symbol.iterator];if("function"==typeof f)for(b=f.call(b);!(f=b.next()).done;)d.push(a.call(c,f.value));else for(var f=b.length,h=0;h<f;h++)d.push(a.call(c,b[h]));return d}},"es6-impl","es3");
$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();var d=b[Symbol.iterator];return d?d.call(b):$jscomp.arrayIterator(b)};$jscomp.owns=function(b,d){return Object.prototype.hasOwnProperty.call(b,d)};
$jscomp.polyfill("WeakMap",function(b){function d(a){$jscomp.owns(a,c)||$jscomp.defineProperty(a,c,{value:{}})}function a(a){var e=Object[a];e&&(Object[a]=function(a){d(a);return e(a)})}if(function(){if(!b||!Object.seal)return!1;try{var a=Object.seal({}),e=Object.seal({}),k=new b([[a,2],[e,3]]);if(2!=k.get(a)||3!=k.get(e))return!1;k["delete"](a);k.set(e,4);return!k.has(a)&&4==k.get(e)}catch(l){return!1}}())return b;var c="$jscomp_hidden_"+Math.random().toString().substring(2);a("freeze");a("preventExtensions");
a("seal");var g=0,f=function(a){this.id_=(g+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var e;!(e=a.next()).done;)e=e.value,this.set(e[0],e[1])}};f.prototype.set=function(a,e){d(a);if(!$jscomp.owns(a,c))throw Error("WeakMap key fail: "+a);a[c][this.id_]=e;return this};f.prototype.get=function(a){return $jscomp.owns(a,c)?a[c][this.id_]:void 0};f.prototype.has=function(a){return $jscomp.owns(a,c)&&$jscomp.owns(a[c],this.id_)};f.prototype["delete"]=
function(a){return $jscomp.owns(a,c)&&$jscomp.owns(a[c],this.id_)?delete a[c][this.id_]:!1};return f},"es6-impl","es3");$jscomp.MapEntry=function(){};$jscomp.ASSUME_NO_NATIVE_MAP=!1;
$jscomp.polyfill("Map",function(b){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),a=new b($jscomp.makeIterator([[e,"s"]]));if("s"!=a.get(e)||1!=a.size||a.get({x:4})||a.set({x:4},"t")!=a||2!=a.size)return!1;var l=a.entries(),c=l.next();if(c.done||c.value[0]!=e||"s"!=c.value[1])return!1;c=l.next();return c.done||4!=c.value[0].x||"t"!=c.value[1]||!l.next().done?!1:!0}catch(m){return!1}}())return b;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var d=new WeakMap,a=function(a){this.data_={};this.head_=f();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var e;!(e=a.next()).done;)e=e.value,this.set(e[0],e[1])}};a.prototype.set=function(a,b){var e=c(this,a);e.list||(e.list=this.data_[e.id]=[]);e.entry?e.entry.value=b:(e.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:b},e.list.push(e.entry),this.head_.previous.next=e.entry,this.head_.previous=e.entry,this.size++);return this};a.prototype["delete"]=
function(a){a=c(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};a.prototype.has=function(a){return!!c(this,a).entry};a.prototype.get=function(a){return(a=c(this,a).entry)&&a.value};a.prototype.entries=function(){return g(this,function(a){return[a.key,
a.value]})};a.prototype.keys=function(){return g(this,function(a){return a.key})};a.prototype.values=function(){return g(this,function(a){return a.value})};a.prototype.forEach=function(a,b){for(var e=this.entries(),c;!(c=e.next()).done;)c=c.value,a.call(b,c[1],c[0],this)};a.prototype[Symbol.iterator]=a.prototype.entries;var c=function(a,b){var e=b&&typeof b;"object"==e||"function"==e?d.has(b)?e=d.get(b):(e=""+ ++h,d.set(b,e)):e="p_"+b;var c=a.data_[e];if(c&&$jscomp.owns(a.data_,e))for(var k=0;k<c.length;k++){var f=
c[k];if(b!==b&&f.key!==f.key||b===f.key)return{id:e,list:c,index:k,entry:f}}return{id:e,list:c,index:-1,entry:void 0}},g=function(a,b){var e=a.head_;return $jscomp.iteratorPrototype(function(){if(e){for(;e.head!=a.head_;)e=e.previous;for(;e.next!=e.head;)return e=e.next,{done:!1,value:b(e)};e=null}return{done:!0,value:void 0}})},f=function(){var a={};return a.previous=a.next=a.head=a},h=0;return a},"es6-impl","es3");$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.polyfill("Set",function(b){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),c=new b($jscomp.makeIterator([a]));if(!c.has(a)||1!=c.size||c.add(a)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var d=c.entries(),f=d.next();if(f.done||f.value[0]!=a||f.value[1]!=a)return!1;f=d.next();return f.done||f.value[0]==a||4!=f.value[0].x||f.value[1]!=f.value[0]?!1:d.next().done}catch(h){return!1}}())return b;
$jscomp.initSymbol();$jscomp.initSymbolIterator();var d=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.map_.size};d.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};d.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};d.prototype.clear=function(){this.map_.clear();this.size=0};d.prototype.has=function(a){return this.map_.has(a)};d.prototype.entries=
function(){return this.map_.entries()};d.prototype.values=function(){return this.map_.values()};d.prototype.keys=d.prototype.values;d.prototype[Symbol.iterator]=d.prototype.values;d.prototype.forEach=function(a,b){var c=this;this.map_.forEach(function(d){return a.call(b,d,d,c)})};return d},"es6-impl","es3");$jscomp.polyfill("Object.is",function(b){return b?b:function(b,a){return b===a?0!==b||1/b===1/a:b!==b&&a!==a}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.includes",function(b){return b?b:function(b,a){var c=this;c instanceof String&&(c=String(c));for(var d=c.length,f=a||0;f<d;f++)if(c[f]==b||Object.is(c[f],b))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(b,d,a){if(null==b)throw new TypeError("The 'this' value for String.prototype."+a+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+a+" must not be a regular expression");return b+""};$jscomp.polyfill("String.prototype.includes",function(b){return b?b:function(b,a){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,a||0)}},"es6-impl","es3");
$(function(){$('[data-toggle="tooltip"]').tooltip({html:!0});$(".tablesorter").tablesorter()});$(function(){function b(){var a=$("table[data-list=reading]"),b=a.find("tr .update-read:not([style])").length,c=0<b?" ("+b+" unread)":"";a.find("thead > tr > th:eq(1) > div").text("Series"+c);a.data("unread",b);d(b)}function d(a){a=50<parseInt(a)?"50+":a;var b=$('link[rel="shortcut icon"]');if(0!==parseInt(a)){var e=$("<canvas/>",{id:"faviconCanvas",style:"/*display: none*/"})[0];e.width=32;e.height=32;var c=e.getContext("2d"),d=new Image;d.onload=function(){c.drawImage(d,0,0,32,32);c.font="Bold 17px Helvetica";
c.textAlign="right";c.lineWidth=3;c.strokeStyle="white";c.strokeText(a,32,30);c.fillStyle="black";c.fillText(a,32,30);b.attr("href",e.toDataURL())};d.src=b.attr("href")}else b.attr("href",base_url+"favicon.ico")}function a(a,b,c){switch(a.status){case 400:alert("ERROR: "+c);break;case 401:alert("Session has expired, please re-log to continue.");break;case 429:alert("ERROR: Rate limit reached.");break;default:alert("ERROR: Something went wrong!\n"+c)}}if("dashboard"!==page)return!1;$(".tracker-table").find("> tbody > tr > td:nth-of-type(1)").click(function(a){$(a.target).is("input")||
(a=$(this).find("> input[type=checkbox]"),$(a).prop("checked",!a.prop("checked")))});$(".toggle-info").click(function(a){a.preventDefault();$(this).find("+ .more-info").toggle();"More info"===$(this).text()?$(this).text("Hide info"):$(this).text("More info")});/^\/list\//.test(location.pathname)||(d($("table[data-list=reading]").data("unread")),$(".footer-debug").click(function(){b()}));$("#update-notice").on("closed.bs.alert",function(){$.post(base_url+"ajax/hide_notice")});$("#category-nav").find("> .nav > li > a").click(function(a){a.preventDefault();
$(this).closest("ul").find("> .active").removeClass("active");$(this).parent().addClass("active");$(".tracker-table:visible").hide();a=$(this).attr("data-list");$('.tracker-table[data-list="'+a+'"]').show();$("html, body").animate({scrollTop:0},"slow")});(function(){function a(){b.scrollTop()>=d?(f.css("margin-top","97px"),c.addClass("fixed-header"),c.css("width",$("#list-nav").parent().width()+"px")):(f.css("margin-top","5px"),c.removeClass("fixed-header"),c.css("width","initial"))}var b=$(window),
c=$("#list-nav"),d=c.offset().top-c.find("> ul").height()-21,f=$("table[data-list]");b.scroll(function(){a()});a()})();if("undefined"!==typeof use_live_countdown_timer&&use_live_countdown_timer&&!/^\/list\//.test(location.pathname))var c=$("#update-timer"),g=c.text().split(":"),f=parseInt(3600*g[0],10)+parseInt(60*g[1],10)+parseInt(g[2],10),h=setInterval(function(){var a=parseInt(f/60/60,10).toString(),b=parseInt(f/60%60,10).toString(),d=parseInt(f%60,10).toString();1===a.length&&(a="0"+a);1===b.length&&
(b="0"+b);1===d.length&&(d="0"+d);c.text(a+":"+b+":"+d);0>--f&&(clearInterval(h),setTimeout(function(){$('link[rel*="icon"]').attr("href",base_url+"favicon.production.updated.ico")},6E4))},1E3);$("#search").on("input",function(){var a=$(this).val(),b=$(".tag-list"),c=b.filter(function(){var b=a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),b=new RegExp(b,"i");return!(b.test($(this).text())||b.test($(this).closest("tr").find("> td:nth-of-type(2) > a").text()))}),b=$(b).not(c);c.closest("tr").addClass("hidden");
b.closest("tr").removeClass("hidden")});$(".update-read").click(function(){var c=$(this).closest("tr"),d=$(c).attr("data-id"),f=$(c).find(".current"),g=$(c).find(".latest"),m=$(this).parent().find(".update-read, .ignore-latest"),c={id:d,chapter:g.attr("data-chapter")};$.post(base_url+"ajax/update_inline",c,function(){m.hide();$(f).attr("href",$(g).attr("href")).text($(g).text());b()}).fail(function(b,c,e){a(b,c,e)})});$(".ignore-latest").click(function(){var c=$(this).closest("tr"),d=$(c).attr("data-id"),
f=$(c).find(".current"),g=$(c).find(".latest"),m=$(this).parent().find(".update-read, .ignore-latest");confirm("Ignore latest chapter?")&&(c={id:d,chapter:g.attr("data-chapter")},$.post(base_url+"ajax/ignore_inline",c,function(){m.hide();$(f).parent().append($("<span/>",{"class":"hidden-chapter",title:"This latest chapter was marked as ignored.",text:$(g).text()}));b()}).fail(function(b,c,e){a(b,c,e)}))});$("#delete-selected").click(function(b){b.preventDefault();var c=$(".tracker-table:visible").find("tr:has(td input[type=checkbox]:checked)");
b=c.length;0<b?(c=$(c).map(function(){return parseInt($(this).attr("data-id"))}).toArray(),confirm("Are you sure you want to delete the "+b+" selected row(s)?")&&$.post(base_url+"ajax/delete_inline",{"id[]":c},function(){location.reload()}).fail(function(b,c,e){a(b,c,e)})):alert("No selected series found.")});$(".set-mal-id").click(function(b){function c(a,b,c){c="0"!==c?c:"none";b.length?b.find("small").text(c):$("<span/>").append($("<small/>",{text:c})).prepend(" (").append(")").insertAfter(a)}
function d(b,c,d){d=d||function(){};$.post(base_url+"ajax/set_mal_id",{id:b,mal_id:c},function(){d()}).fail(function(b,c,d){a(b,c,d)})}b.preventDefault();var e=this;b=$(this).data("mal-id");if("title"!==$(this).data("mal-type")||!$(this).data("mal-id")||confirm("A MAL ID already exists for this series on our backend.\n Are you sure you want to override it?")){var f=prompt("MAL ID:",b);if(/^([0-9]+|none)?$/.test(f)){b=$(this).closest("tr");var g=b.find("td:eq(1)");b=b.attr("data-id");var h=$(g).find(".sprite-myanimelist-net").parent(),
n=$(this).find("+ span");""!==f&&"none"!==f&&"0"!==f?d(b,f,function(){h.length?$(h).attr("href","https://myanimelist.net/manga/"+f):$($("<a/>",{href:"https://myanimelist.net/manga/"+f}).append($("<i/>",{"class":"sprite-site sprite-myanimelist-net",title:f}))).prepend(" ").insertAfter(g.find(".sprite-site"));c($(e),n,f)}):"none"===f||"0"===f?d(b,"0",function(){h.length&&$(h).remove();$($("<a/>",{}).append($("<i/>",{"class":"sprite-site sprite-myanimelist-net-none",title:f}))).prepend(" ").insertAfter(g.find(".sprite-site"));
c($(e),n,"none")}):d(b,null,function(){h.remove();n.remove()});$(this).data("mal-id",f)}else null!==f&&alert("MAL ID can only contain numbers.")}});(function(){$(".edit-tags").click(function(a){a.preventDefault();$(this).parent().find(".tag-edit").toggleClass("hidden")});$(".tag-edit input").on("keypress",function(a){13===a.which&&$(this).closest(".tag-edit").find("[type=button]").click()});$(".tag-edit [type=button]").click(function(){var b=this,c=$(this).closest(".tag-edit").find("input"),d=c.val().toString().trim().replace(/,,/g,
","),f=$(this).closest("tr").attr("data-id");if(/^[a-z0-9\-_,:]{0,255}$/.test(d)){var g=Array.from(new Set(d.split(","))).filter(function(a){return""!==a}),h=g.join(",");-1===$.inArray("none",g)?1>=(d.match(/\bmal:(?:[0-9]+|none)\b/g)||[]).length?$.post(base_url+"ajax/tag_update",{id:f,tag_string:h},function(){$(c).val(h);$(b).closest(".more-info").find(".tag-list").text(h||"none");$(b).closest(".tag-edit").toggleClass("hidden")}).fail(function(b,c,d){a(b,c,d)}):alert("You can only use one MAL ID tag per series"):
alert('"none" is a restricted tag.')}else alert("Tags can only contain: lowercase a-z, 0-9, -, :, & _. They can also only have one MAL metatag.")})})();$("#move-input").change(function(){var b=$(this).find(":selected");if(b.is("[value]")){var c=$(".tracker-table:visible").find("tr:has(td input[type=checkbox]:checked)");0<c.length&&(c=$(c).map(function(){return parseInt($(this).attr("data-id"))}).toArray(),$.post(base_url+"ajax/set_category",{"id[]":c,category:b.attr("value")},function(){location.reload()}).fail(function(b,
c,d){a(b,c,d)}))}})});$(function(){if("history"!==page)return!1;$(".pagination").pagination({currentPage:currentPagination,pages:totalPagination,displayedPages:10,hrefTextPrefix:/user\/history/.test(location.pathname)?"/user/history/":"/history/"+titleID+"/",selectOnClick:!1,prevText:"&laquo;",nextText:"&raquo;"})});$(function(){if("import_amr"!==page)return!1;var b="Manga-Fox;Batoto;Manga Here;MangaStream;Manga Panda;Kirei Cake;Dynasty Scans".split(";");$("#amr_import").change(function(){var d=this.files;if(d&&d[0])if(d=d[0],d.name.match(/\.(json|txt)$/))if(2097152<d.size)alert("ERROR: File too large ( < 2MB)!");else{var a=new FileReader;a.onload=function(a){a=a.target.result;a:{try{JSON.parse(a)}catch(p){var c=!1;break a}c=!0}if(c)if(a=JSON.parse(a),a.mangas){var d={};if(JSON.parse(a.mangas).every(function(a){return"mirror"in
a||"name"in a||"url"in a||"lastChapterReadURL"in a?(d[a.mirror]||(d[a.mirror]=[]),d[a.mirror].push(a),!0):!1}))for(var h in d){if(d.hasOwnProperty(h)){a=d[h];c=b.includes(h)?"#amr_good":"#amr_bad";"#amr_bad"===c&&$("#amr_bad").is(":empty")&&$("<h3/>",{text:"Incompatible Sites"}).appendTo("#amr_bad");$("<h4/>",{text:h+" ("+a.length+")"}).appendTo(c);var e=$("<tbody/>",{"aria-live":"polite","aria-relevant":"all"}),k;for(k in a)if(a.hasOwnProperty(k)){var l=$("<tr/>",{role:"row"}).append($("<td/>",{style:"width: 50%"}).append($("<a/>",
{href:k.url,text:k.name}))).append($("<td/>",{style:"width: 50%"}).append($("<a/>",{href:k.lastChapterReadURL,text:k.lastChapterReadName})));e.append(l)}$("<table/>",{"class":"tablesorter tablesorter-bootstrap table-striped",role:"grid"}).append(e).appendTo(c)}}else alert("JSON has invalid keys?")}else alert('JSON file is missing "mangas" object. Was this exported from AMR?');else alert("ERROR: File isn't valid JSON!")};a.readAsText(d)}else alert("ERROR: Only .json/txt is supported!")})});$(function(){if("index"!==page)return!1;$(".example-image").hover(function(){$(this).attr("src",function(b,d){return d.replace(/\.png$/,".gif")})},function(){$(this).attr("src",function(b,d){return d.replace(/\.gif$/,".png")})})});$(function(){if("login"!==page)return!1;$(".button-checkbox").each(function(){function b(){var b=c.is(":checked");a.data("state",b?"on":"off");a.find(".state-icon").removeClass().addClass("state-icon "+f[a.data("state")].icon);b?a.removeClass("btn-default").addClass("btn-"+g+" active"):a.removeClass("btn-"+g+" active").addClass("btn-default")}var d=$(this),a=d.find("button"),c=d.find("input:checkbox"),g=a.data("color"),f={on:{icon:"glyphicon glyphicon-check"},off:{icon:"glyphicon glyphicon-unchecked"}};
a.on("click",function(){c.prop("checked",!c.is(":checked"));c.triggerHandler("change");b()});c.on("change",function(){b()});b();0===a.find(".state-icon").length&&a.prepend('<i class="state-icon '+f[a.data("state")].icon+'"></i>\u00a0')})});$(function(){if("options"!==page)return!1;$("input[type=checkbox][name^=category_custom]").change(function(){"1"===$(this).data("has-series")&&(alert("Unable to disable category while it still contains series."),$(this).prop("checked",!$(this).prop("checked")))});$("input[type=text][name^=category_custom]").click(function(){$(this).parent().find("[type=checkbox]").attr("checked",!0)})});$(function(){if("signup"!==page)return!1;$("#page[data-page=signup]").find("form").validate({ignore:[],onkeyup:!1,rules:{username:{minlength:4,maxlength:15,pattern:/^[a-zA-Z0-9_-]{4,15}$/,remote:{url:base_url+"ajax/username_check",type:"post",data:{username:function(){return $('input[name="username"]').val()}}}}},messages:{username:{minlength:"This username is too short (Minimum 4 characters).",maxlength:"This username is too long (Maximum 15 characters).",pattern:"This username has invalid characters (Only allowed a-z, A-Z, 0-9, _ & - characters).",
remote:"This username already taken."}}});$(".button-checkbox").each(function(){function b(){var b=c.is(":checked");a.data("state",b?"on":"off");a.find(".state-icon").removeClass().addClass("state-icon "+f[a.data("state")].icon);b?a.removeClass("btn-default").addClass("btn-"+g+" active"):a.removeClass("btn-"+g+" active").addClass("btn-default")}var d=$(this),a=d.find("button"),c=d.find("input:checkbox"),g=a.data("color"),f={on:{icon:"glyphicon glyphicon-check"},off:{icon:"glyphicon glyphicon-unchecked"}};
a.on("click",function(){c.prop("checked",!c.is(":checked"));c.triggerHandler("change");b()});c.on("change",function(){b()});b();0===a.find(".state-icon").length&&a.prepend('<i class="state-icon '+f[a.data("state")].icon+'"></i>')})});
