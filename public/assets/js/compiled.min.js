var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var d=a.length,f=0;f<d;f++){var e=a[f];if(c.call(b,e,f,a))return{i:f,v:e}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var f=a[d];f in b||(b[f]={});b=b[f]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.polyfill("Array.from",function(a){return a?a:function(a,b,d){$jscomp.initSymbolIterator();b=null!=b?b:function(a){return a};var c=[],e=a[Symbol.iterator];if("function"==typeof e)for(a=e.call(a);!(e=a.next()).done;)c.push(b.call(d,e.value));else for(var e=a.length,g=0;g<e;g++)c.push(b.call(d,a[g]));return c}},"es6-impl","es3");
$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var c=a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.owns=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};
$jscomp.polyfill("WeakMap",function(a){function c(a){$jscomp.owns(a,d)||$jscomp.defineProperty(a,d,{value:{}})}function b(a){var b=Object[a];b&&(Object[a]=function(a){c(a);return b(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),d=Object.seal({}),c=new a([[b,2],[d,3]]);if(2!=c.get(b)||3!=c.get(d))return!1;c["delete"](b);c.set(d,4);return!c.has(b)&&4==c.get(d)}catch(m){return!1}}())return a;var d="$jscomp_hidden_"+Math.random().toString().substring(2);b("freeze");b("preventExtensions");
b("seal");var f=0,e=function(a){this.id_=(f+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};e.prototype.set=function(a,b){c(a);if(!$jscomp.owns(a,d))throw Error("WeakMap key fail: "+a);a[d][this.id_]=b;return this};e.prototype.get=function(a){return $jscomp.owns(a,d)?a[d][this.id_]:void 0};e.prototype.has=function(a){return $jscomp.owns(a,d)&&$jscomp.owns(a[d],this.id_)};e.prototype["delete"]=
function(a){return $jscomp.owns(a,d)&&$jscomp.owns(a[d],this.id_)?delete a[d][this.id_]:!1};return e},"es6-impl","es3");$jscomp.MapEntry=function(){};$jscomp.ASSUME_NO_NATIVE_MAP=!1;
$jscomp.polyfill("Map",function(a){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),d=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=d.get(b)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var c=d.entries(),e=c.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=c.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!c.next().done?!1:!0}catch(k){return!1}}())return a;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var c=new WeakMap,b=function(a){this.data_={};this.head_=e();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};b.prototype.set=function(a,b){var c=d(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};b.prototype["delete"]=
function(a){a=d(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};b.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=e();this.size=0};b.prototype.has=function(a){return!!d(this,a).entry};b.prototype.get=function(a){return(a=d(this,a).entry)&&a.value};b.prototype.entries=function(){return f(this,function(a){return[a.key,
a.value]})};b.prototype.keys=function(){return f(this,function(a){return a.key})};b.prototype.values=function(){return f(this,function(a){return a.value})};b.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};b.prototype[Symbol.iterator]=b.prototype.entries;var d=function(a,b){var d=b&&typeof b;"object"==d||"function"==d?c.has(b)?d=c.get(b):(d=""+ ++g,c.set(b,d)):d="p_"+b;var e=a.data_[d];if(e&&$jscomp.owns(a.data_,d))for(var f=0;f<e.length;f++){var h=
e[f];if(b!==b&&h.key!==h.key||b===h.key)return{id:d,list:e,index:f,entry:h}}return{id:d,list:e,index:-1,entry:void 0}},f=function(a,b){var d=a.head_;return $jscomp.iteratorPrototype(function(){if(d){for(;d.head!=a.head_;)d=d.previous;for(;d.next!=d.head;)return d=d.next,{done:!1,value:b(d)};d=null}return{done:!0,value:void 0}})},e=function(){var a={};return a.previous=a.next=a.head=a},g=0;return b},"es6-impl","es3");$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.polyfill("Set",function(a){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),d=new a($jscomp.makeIterator([b]));if(!d.has(b)||1!=d.size||d.add(b)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var c=d.entries(),e=c.next();if(e.done||e.value[0]!=b||e.value[1]!=b)return!1;e=c.next();return e.done||e.value[0]==b||4!=e.value[0].x||e.value[1]!=e.value[0]?!1:c.next().done}catch(g){return!1}}())return a;
$jscomp.initSymbol();$jscomp.initSymbolIterator();var c=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.map_.size};c.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};c.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};c.prototype.clear=function(){this.map_.clear();this.size=0};c.prototype.has=function(a){return this.map_.has(a)};c.prototype.entries=
function(){return this.map_.entries()};c.prototype.values=function(){return this.map_.values()};c.prototype.keys=c.prototype.values;c.prototype[Symbol.iterator]=c.prototype.values;c.prototype.forEach=function(a,d){var b=this;this.map_.forEach(function(c){return a.call(d,c,c,b)})};return c},"es6-impl","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var d=this;d instanceof String&&(d=String(d));for(var c=d.length,e=b||0;e<c;e++)if(d[e]==a||Object.is(d[e],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6-impl","es3");
$(function(){$('[data-toggle="tooltip"]').tooltip({html:!0});$(".tablesorter").tablesorter()});$(function(){function a(){var a=$("table[data-list=reading]"),b=a.find("tr .update-read:not([style])").length,d=0<b?" ("+b+" unread)":"";a.find("thead > tr > th:eq(1) > div").text("Series"+d);a.data("unread",b);c(b)}function c(a){a=50<parseInt(a)?"50+":a;var b=$('link[rel="shortcut icon"]');if(0!==parseInt(a)){var d=$("<canvas/>",{id:"faviconCanvas",style:"/*display: none*/"})[0];d.width=32;d.height=32;var c=d.getContext("2d"),e=new Image;e.onload=function(){c.drawImage(e,0,0,32,32);c.font="Bold 17px Helvetica";
c.textAlign="right";c.lineWidth=3;c.strokeStyle="white";c.strokeText(a,32,30);c.fillStyle="black";c.fillText(a,32,30);b.attr("href",d.toDataURL())};e.src=b.attr("href")}else b.attr("href",base_url+"favicon.ico")}function b(){m.scrollTop()>=r?(q.css("margin-top","97px"),k.addClass("fixed-header"),k.css("width",$("#list-nav").parent().width()+"px")):(q.css("margin-top","5px"),k.removeClass("fixed-header"),k.css("width","initial"))}function d(a,b,d){switch(a.status){case 400:alert("ERROR: "+d);break;
case 401:alert("Session has expired, please re-log to continue.");break;case 429:alert("ERROR: Rate limit reached.");break;default:alert("ERROR: Something went wrong!\n"+d)}}var f=this;if("dashboard"!==page)return!1;$(".tracker-table").find("> tbody > tr > td:nth-of-type(1)").click(function(a){$(a.target).is("input")||(a=$(this).find("> input[type=checkbox]"),$(a).prop("checked",!a.prop("checked")))});$(".update-read").click(function(){var b=$(this).closest("tr"),c=$(b).attr("data-id"),e=$(b).find(".current"),
f=$(b).find(".latest"),n=$(this).parent().find(".update-read, .ignore-latest"),b={id:c,chapter:f.attr("data-chapter")};$.post(base_url+"ajax/update_inline",b,function(){n.hide();$(e).attr("href",$(f).attr("href")).text($(f).text());a()}).fail(function(a,b,c){d(a,b,c)})});$(".ignore-latest").click(function(){var b=$(this).closest("tr"),c=$(b).attr("data-id"),e=$(b).find(".current"),f=$(b).find(".latest"),n=$(this).parent().find(".update-read, .ignore-latest");confirm("Ignore latest chapter?")&&(b=
{id:c,chapter:f.attr("data-chapter")},$.post(base_url+"ajax/ignore_inline",b,function(){n.hide();$(e).parent().append($("<span/>",{"class":"hidden-chapter",title:"This latest chapter was marked as ignored.",text:$(f).text()}));a()}).fail(function(a,b,c){d(a,b,c)}))});$("#delete_selected").click(function(a){a.preventDefault();var b=$(".tracker-table:visible").find("tr:has(td input[type=checkbox]:checked)");a=b.length;0<a?(b=$(b).map(function(){return parseInt($(this).attr("data-id"))}).toArray(),confirm("Are you sure you want to delete the "+
a+" selected row(s)?")&&$.post(base_url+"ajax/delete_inline",{"id[]":b},function(){location.reload()}).fail(function(a,b,c){d(a,b,c)})):alert("No selected series found.")});$(".set-mal-id").click(function(a){function b(a,b,d){d="0"!==d?d:"none";b.length?b.find("small").text(d):$("<span/>").append($("<small/>",{text:d})).prepend(" (").append(")").insertAfter(a)}function c(a,b,c){c=c||function(){};$.post(base_url+"ajax/set_mal_id",{id:a,mal_id:b},function(){c()}).fail(function(a,b,c){d(a,b,c)})}a.preventDefault();
var e=this;a=$(this).data("mal-id");if("title"!==$(this).data("mal-type")||!$(this).data("mal-id")||confirm("A MAL ID already exists for this series on our backend.\n Are you sure you want to override it?")){var f=prompt("MAL ID:",a);if(/^([0-9]+|none)?$/.test(f)){a=$(this).closest("tr");var g=a.find("td:eq(1)");a=a.attr("data-id");var l=$(g).find(".sprite-myanimelist-net").parent(),h=$(this).find("+ span");""!==f&&"none"!==f&&"0"!==f?c(a,f,function(){l.length?$(l).attr("href","https://myanimelist.net/manga/"+
f):$($("<a/>",{href:"https://myanimelist.net/manga/"+f}).append($("<i/>",{"class":"sprite-site sprite-myanimelist-net",title:f}))).prepend(" ").insertAfter(g.find(".sprite-site"));b($(e),h,f)}):"none"===f||"0"===f?c(a,"0",function(){l.length&&$(l).remove();$($("<a/>",{}).append($("<i/>",{"class":"sprite-site sprite-myanimelist-net-none",title:f}))).prepend(" ").insertAfter(g.find(".sprite-site"));b($(e),h,"none")}):c(a,null,function(){l.remove();h.remove()});$(this).data("mal-id",f)}else null!==f&&
alert("MAL ID can only contain numbers.")}});$(".more-info").click(function(a){a.preventDefault();$(this).find("+ .tags").toggleClass("has-tags");"More info"===$(this).text()?$(this).text("Hide info"):$(this).text("More info")});$(".edit-tags").click(function(a){a.preventDefault();$(this).parent().find(".tag-edit").toggleClass("hidden")});$(".tag-edit input").on("keypress",function(){13===event.which&&$(f).closest(".tag-edit").find("[type=button]").click()});$(".tag-edit [type=button]").click(function(){var a=
this,b=$(this).closest(".tag-edit").find("input"),c=b.val().toString().trim().replace(/,,/g,","),e=$(this).closest("tr").attr("data-id");if(/^[a-z0-9\-_,:]{0,255}$/.test(c)){var f=Array.from(new Set(c.split(","))).filter(function(a){return""!==a}),g=f.join(",");-1===$.inArray("none",f)?1>=(c.match(/\bmal:(?:[0-9]+|none)\b/g)||[]).length?$.post(base_url+"ajax/tag_update",{id:e,tag_string:g},function(){$(b).val(g);$(a).closest(".tags").find(".tag-list").text(g||"none");$(a).closest(".tag-edit").toggleClass("hidden")}).fail(function(a,
b,c){d(a,b,c)}):alert("You can only use one MAL ID tag per series"):alert('"none" is a restricted tag.')}else alert("Tags can only contain: lowercase a-z, 0-9, -, :, & _. They can also only have one MAL metatag.")});$("#search").on("input",function(){var a=$(this).val(),b=$(".tag-list"),d=b.filter(function(){var b=a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),b=new RegExp(b,"i");return!(b.test($(this).text())||b.test($(this).closest("tr").find("> td:nth-of-type(2) > a").text()))}),b=$(b).not(d);d.closest("tr").addClass("hidden");
b.closest("tr").removeClass("hidden")});$("#category-nav").find("> .nav > li > a").click(function(a){a.preventDefault();$(this).closest("ul").find("> .active").removeClass("active");$(this).parent().addClass("active");$(".tracker-table:visible").hide();a=$(this).attr("data-list");$('.tracker-table[data-list="'+a+'"]').show();$("html, body").animate({scrollTop:0},"slow")});$("#move-input").change(function(){var a=$(this).find(":selected");if(a.is("[value]")){var b=$(".tracker-table:visible").find("tr:has(td input[type=checkbox]:checked)");
0<b.length&&(b=$(b).map(function(){return parseInt($(this).attr("data-id"))}).toArray(),$.post(base_url+"ajax/set_category",{"id[]":b,category:a.attr("value")},function(){location.reload()}).fail(function(a,b,c){d(a,b,c)}))}});if("undefined"!==typeof use_live_countdown_timer&&use_live_countdown_timer&&!/^\/list\//.test(location.pathname))var e=$("#update-timer"),g=e.text().split(":"),h=parseInt(3600*g[0],10)+parseInt(60*g[1],10)+parseInt(g[2],10),p=setInterval(function(){var a=parseInt(h/60/60,10).toString(),
b=parseInt(h/60%60,10).toString(),d=parseInt(h%60,10).toString();1===a.length&&(a="0"+a);1===b.length&&(b="0"+b);1===d.length&&(d="0"+d);e.text(a+":"+b+":"+d);0>--h&&(clearInterval(p),setTimeout(function(){$('link[rel*="icon"]').attr("href",base_url+"favicon.production.updated.ico")},6E4))},1E3);var m=$(window),r=$("#category-nav").offset().top-$("#category-nav").find("> ul").height()-21,k=$("#list-nav"),q=$("table[data-list]");m.scroll(function(){b()});b();$("#update-notice").on("closed.bs.alert",
function(){$.post(base_url+"ajax/hide_notice")});/^\/list\//.test(location.pathname)||c($("table[data-list=reading]").data("unread"))});$(function(){if("history"!==page)return!1;$(".pagination").pagination({currentPage:currentPagination,pages:totalPagination,displayedPages:10,hrefTextPrefix:/user\/history/.test(location.pathname)?"/user/history/":"/history/"+titleID+"/",selectOnClick:!1,prevText:"&laquo;",nextText:"&raquo;"})});$(function(){if("import_amr"!==page)return!1;var a="Manga-Fox;Batoto;Manga Here;MangaStream;Manga Panda;Kirei Cake;Dynasty Scans".split(";");$("#amr_import").change(function(){var c=this.files;if(c&&c[0])if(c=c[0],c.name.match(/\.(json|txt)$/))if(2097152<c.size)alert("ERROR: File too large ( < 2MB)!");else{var b=new FileReader;b.onload=function(b){b=b.target.result;a:{try{JSON.parse(b)}catch(p){var c=!1;break a}c=!0}if(c)if(b=JSON.parse(b),b.mangas){var d={};if(JSON.parse(b.mangas).every(function(a){return"mirror"in
a||"name"in a||"url"in a||"lastChapterReadURL"in a?(d[a.mirror]||(d[a.mirror]=[]),d[a.mirror].push(a),!0):!1})){b={};for(var g in d){c=d[g];var h=a.includes(g)?"#amr_good":"#amr_bad";"#amr_bad"===h&&$("#amr_bad").is(":empty")&&$("<h3/>",{text:"Incompatible Sites"}).appendTo("#amr_bad");$("<h4/>",{text:g+" ("+c.length+")"}).appendTo(h);b.tbody=$("<tbody/>",{"aria-live":"polite","aria-relevant":"all"});c.forEach(function(a){return function(b){$("<tr/>",{role:"row"}).append($("<td/>",{style:"width: 50%"}).append($("<a/>",
{href:b.url,text:b.name}))).append($("<td/>",{style:"width: 50%"}).append($("<a/>",{href:b.lastChapterReadURL,text:b.lastChapterReadName}))).appendTo(a.tbody)}}(b));$("<table/>",{"class":"tablesorter tablesorter-bootstrap table-striped",role:"grid"}).append(b.tbody).appendTo(h);b={tbody:b.tbody}}}else alert("JSON has invalid keys?")}else alert('JSON file is missing "mangas" object. Was this exported from AMR?');else alert("ERROR: File isn't valid JSON!")};b.readAsText(c)}else alert("ERROR: Only .json/txt is supported!")})});$(function(){if("index"!==page)return!1;$(".example-image").hover(function(){$(this).attr("src",function(a,c){return c.replace(/\.png$/,".gif")})},function(){$(this).attr("src",function(a,c){return c.replace(/\.gif$/,".png")})})});$(function(){if("login"!==page)return!1;$(".button-checkbox").each(function(){function a(){var a=d.is(":checked");b.data("state",a?"on":"off");b.find(".state-icon").removeClass().addClass("state-icon "+e[b.data("state")].icon);a?b.removeClass("btn-default").addClass("btn-"+f+" active"):b.removeClass("btn-"+f+" active").addClass("btn-default")}var c=$(this),b=c.find("button"),d=c.find("input:checkbox"),f=b.data("color"),e={on:{icon:"glyphicon glyphicon-check"},off:{icon:"glyphicon glyphicon-unchecked"}};
b.on("click",function(){d.prop("checked",!d.is(":checked"));d.triggerHandler("change");a()});d.on("change",function(){a()});a();0===b.find(".state-icon").length&&b.prepend('<i class="state-icon '+e[b.data("state")].icon+'"></i>\u00a0')})});$(function(){if("options"!==page)return!1;$("input[type=checkbox][name^=category_custom]").change(function(){"1"===$(this).data("has-series")&&(alert("Unable to disable category while it still contains series."),$(this).prop("checked",!$(this).prop("checked")))});$("input[type=text][name^=category_custom]").click(function(){$(this).parent().find("[type=checkbox]").attr("checked",!0)})});$(function(){if("signup"!==page)return!1;$("#page[data-page=signup]").find("form").validate({ignore:[],onkeyup:!1,rules:{username:{minlength:4,maxlength:15,pattern:/^[a-zA-Z0-9_-]{4,15}$/,remote:{url:base_url+"ajax/username_check",type:"post",data:{username:function(){return $('input[name="username"]').val()}}}}},messages:{username:{minlength:"This username is too short (Minimum 4 characters).",maxlength:"This username is too long (Maximum 15 characters).",pattern:"This username has invalid characters (Only allowed a-z, A-Z, 0-9, _ & - characters).",
remote:"This username already taken."}}});$(".button-checkbox").each(function(){function a(){var a=d.is(":checked");b.data("state",a?"on":"off");b.find(".state-icon").removeClass().addClass("state-icon "+e[b.data("state")].icon);a?b.removeClass("btn-default").addClass("btn-"+f+" active"):b.removeClass("btn-"+f+" active").addClass("btn-default")}var c=$(this),b=c.find("button"),d=c.find("input:checkbox"),f=b.data("color"),e={on:{icon:"glyphicon glyphicon-check"},off:{icon:"glyphicon glyphicon-unchecked"}};
b.on("click",function(){d.prop("checked",!d.is(":checked"));d.triggerHandler("change");a()});d.on("change",function(){a()});a();0===b.find(".state-icon").length&&b.prepend('<i class="state-icon '+e[b.data("state")].icon+'"></i>')})});
