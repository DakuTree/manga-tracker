$(function(){$('[data-toggle="tooltip"]').tooltip({html:!0})});$(function(){function c(a,b){b="undefined"!==typeof b?b:!1;$("#import-status").text(a).show().delay(4E3).fadeOut(1E3).attr("style",b?"color: rgb(0, 230 ,0)":"color: rgb(230, 0 ,0)")}$(".tablesorter").tablesorter({sortList:[[0,0],[1,0]]});$(".update-read").click(function(a){var b=this;a=$(this).closest("tr");var d=$(a).attr("data-id"),e=$(a).find(".current"),c=$(a).find(".latest");$.post(base_url+"ajax/update_tracker_inline",{id:d,chapter:c.text()},function(a){$(b).hide();$(e).attr("href",$(c).attr("href")).text($(c).text())})});
$("#tracker-table > tbody > tr > td:nth-of-type(1)").click(function(){var a=$(this).find("> input[type=checkbox]");$(a).prop("checked",!a.prop("checked"))});$("#file_import").change(function(){var a=this.files;if(a&&a[0])if(a=a[0],a.name.match(/\.json$/))if(2097152<a.size)c("ERROR: File too large ( < 2MB)!");else{var b=new FileReader;b.onload=function(a){a=a.target.result;var b;a:{try{JSON.parse(a)}catch(f){b=!1;break a}b=!0}b?(b=new FormData,b.append("json",a),$.ajax({type:"POST",url:"./import_list",
data:b,success:function(){c("Upload was a success! Reloading page.",!0);setTimeout(function(){location.reload()},2500)},error:function(b,a,d){c("ERROR: Upload failed! - "+b.status)},contentType:!1,processData:!1})):c("ERROR: File isn't valid JSON!")};b.readAsText(a)}else c("ERROR: Only .json is supported!")})});$(function(){$(".button-checkbox").each(function(){function c(){var a=d.is(":checked");b.data("state",a?"on":"off");b.find(".state-icon").removeClass().addClass("state-icon "+f[b.data("state")].icon);a?b.removeClass("btn-default").addClass("btn-"+e+" active"):b.removeClass("btn-"+e+" active").addClass("btn-default")}var a=$(this),b=a.find("button"),d=a.find("input:checkbox"),e=b.data("color"),f={on:{icon:"glyphicon glyphicon-check"},off:{icon:"glyphicon glyphicon-unchecked"}};b.on("click",function(){d.prop("checked",
!d.is(":checked"));d.triggerHandler("change");c()});d.on("change",function(){c()});c();0==b.find(".state-icon").length&&b.prepend('<i class="state-icon '+f[b.data("state")].icon+'"></i>\u00a0')})});$(function(){$("#page[data-page=signup] form").validate({ignore:[],onkeyup:!1,rules:{username:{minlength:4,maxlength:15,pattern:/^[a-zA-Z0-9_-]{4,15}$/,remote:{url:base_url+"ajax/username_check",type:"post",data:{username:function(){return $("input[name='username']").val()}}}}},messages:{username:{minlength:"This username is too short (Minimum 4 characters).",maxlength:"This username is too long (Maximum 15 characters).",pattern:"This username has invalid characters (Only allowed a-z, A-Z, 0-9, _ & - characters).",
remote:"This username already taken."}}})});
